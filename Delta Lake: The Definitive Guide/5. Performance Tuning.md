# 5. Performance Tuning
## Performance Objectives
Важно понимать какая именно оптимизация требуется. Одни решения применимы для производителей, другие - для потребителей. 
### Maximizing read performance
Один из эффективных способов оптимизации чтения - учитывать способы запроса данных потребителем при их проектировании. Можно выделить три типа запросов: точечные, диапазонные и аггрегационные.
> чтобы обеспечить максимальную производительность, необходимо согласовать стратегию обработки данных со способом их получения
### Maximizing write performance
...
## Performance Considerations
### Partitioning
Данные в Delta таблицах могут быть партиционированы как обычный parquet в Hive-стиле.
Следует стремиться к размеру отдельных файлов в партициях ~1ГБ. Таблицы менее 1ТБ лучшее вообще не партиционировать.
### Table Utilities
Optimize сжимает множество маленьких файлов в файлы примерно заданного размера. Z-ordering позволяет линейно кластеризовать нелинейные (=по нескольким ключам) данные. В реализации для деления на кластера использует заполняющую многомерное простраанство кривую.
Autocompaction и Optimized Writes пока доступны только в Databriks, но позже станут открыты для всех пользователей Delta.
### Table Statistics
В метаданных можно хранить статистику о содержимом файлов, чтобы пропускать лишние при чтении.
### Cluster By
Как и z-order разделяет данные на кластеры. Но в реализации использует k-d дерево и конфигурируется самой таблицей по запросу.
### Bloom Filter Index
HashMap индекс, который определяет, существует значение в файле или нет.
### Conclusion
_Возможно, стоих добавить в таблицу чеков bloom filter или cluster by по ИНН_
_Не понял, optimize блокирует все чтения из таблиц, или нет.