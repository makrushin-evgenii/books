## Глава 1. Надежные, масштабируемые и удобные в сопровождении приложения
## 1.1. Подходы к работе над информационными системами
- Надежность. Система должна продолжать работать корректно даже при неблагоприятных обстоятельствах.
- Масштабируемость. Должны быть предусмотрены разумные способы решения возникающих при росте системы проблем.
- Удобство сопровождения. Необходимо обеспечить возможность эффективной аботы с системой множеству различных людей.
## 1.2. Надежность
Приложение "надежное", если продолжает работать нормально даже в случае проблем:
- Приложение выполняет ожидаемую пользователем функцию;
- Оно способно выдержать ошибочные действия пользователя или применение программного обеспечения неожиданным образом;
- Его производительность достаточно высока для текущего сценария использования, при предполагаемоей нагрузке и объеме данных;
- Система предоствращает любой несанкционированный доступ и неправильную эксплуатацию.
Сбой (fault) - отклонение одного из компонентов системы от рабочих характеристик.
Отказ (failure) - ситуация, когда вся система в целом прекращает предоставление требуемого сервиса пользователю.
### Аппаратные сбои
Сбои, связанные с выроботкой в отказ аппаратного обеспечения. Раньше решалось избыточностью компонентов аппаратного обеспечения: ЦПУ с возможностью горячей замены, RAID-массивы из дисков, резервное электропитание.
Происходит сдвиг в сторону систем, способных перенести потерю машин, благодаря применению методов устойчивости к сбоям вместо или в дополнение к избыточности аппаратного обеспечения.
### Программные ошибки
Такие ошибки часто долго остаются неактивными, вплоть до момента срабатывания под влиянием необычных обстоятельств.
Могут быть полезны: встестороннее тестирование; изоляция процессов; предоставление процессам возможности перезапуска после фатального сбоя; оценка, мониторинг и анализ поведения системы при промышленной эксплуатации.
### Человеческий фактор
- Обеспечение возможности быстрого и удобного восстановления после появления ошибок для минимизации последствий в случае отказа.
- Выделение "песочниц" для экспериментов с настоящими данными, не влияя на на реальных пользователей.
- Телеметрия. Подробный и ясный мониторинг, в т.ч. метрик производительности и частоты ошибок.
- Внедрение рекомендуемых управленческих практик и обучение.
- Грамотно спроектированные абстракции, API и интерфейсы.
- Всестороннее тестирование.
### Насколько важна надежность
...
## 1.3 Масштабируемость
Масштабируемость (scalability) - способность системы справляться с возросшей нагрузкой.
### Описание нагрузки
Нагрузку можно описанить с помощью нескольких чисел - *параметров нагрузки*. Оптимальный выбор таких параметров зависит от архитектуры системы: количество запросов в секунду, отношение операций чтения к операция записи в базе данных, количество активных пользователей и т.д. .
### Описание производительности
- Как изменится производительность системы, если увеличить параметр нагрзки при неизменных ресурсах?
- Насколько нужно увеличить ресурсы при увеличении параметра нагрузки, чтобы производительность не изменилась?

Время ожидания (latency) - время ожидания запросов обработки. 
Время отклика (response time) - видит пользователь, время обслуживания (service time) + время передач данных по сети.

Арифметическое среднее - плохой показатель. Полезнее процентили: p50 (медиана), p95, p99/99.9.

Оптимизация по p99.9 может быть важна, потому что такие запросы генерируют самые активные пользователи, например сделавшие большее число покупок, а значит самые важные для компании. Но оптимизация по p99.99 может быть слишком дорогой и не приносящей достаточно выгоды.

Требования к уровню предоставления сервиса (SLO, service level objectives) и соглашения об уровне предоставления сервиса (SLA, service level agreements) - контракты, описывающие ожидаемые производительность и доступность сервиса. В SLA обозначают показатели при которых сервис считается работающим нормально, а в SLO - долю времени, которую он обязан работать нормально.

Блокировка головы очереди. При низкой параллельности обработки очереди, долгое время обработки одного запроса приводит к увеличению общего времени задержки для всех последующих запросов. Даже если они сами обрабатываются быстро. Поэтому важно измерять время отклика на стороне клиента.

Усиление "хвостового" времени ожидания. Если для обслуживания запроса необходимо несколько обращений к прикладным сервисам, то один-единственный медленный прикладной запрос может затормозить работу всего запроса конечного пользователя.
### Как справиться с нагрузкой
Вертикальное масштабирование - переход на более мощную машину, горизонтальное - распределение нагрузки по нескольким машинам.

Адаптивность - способность системы автоматически добавлять вычислительные ресурсы при обнаружении прироста нагрузки.

Архитектура систем сильно зависит от приложения - нет одной машстабируемой архитектуры на все случаи. Хорошая масштабируемая для конкретного приложения архитектура базируется на допущениях о том, какие операции будут выполнять часто, а какие - редко, то есть на параметрах нагрузки.
## 1.4 Удобство сопровождения
Сопровождения - как правило бОльшая часть из стоимости программного обеспечения. Три принципа проектирования удобных в сопровождении систем:
- Удобство эксплуатации. Облегчает обслуживающему персоналу поддержание беспрепятственной работы системы.
- Возможность развития. Упрощает внесение изменений в систему.
- Простота. Облегчает понимание системы новыми инженерами.
### Удобство эксплуатации
Удобство эксплуатации означает облегчение выполнения стандартных задач, благодаря чему обслуживающий персонал может сосредоточиться на чем-то более важном. Хорошая система: обеспечивает мониторинг, автоматизацию и интеграции со стандартными утилитами, не зависят от отдельных машин, предоставляют качественную документацию, запускают самовостановление сапостоятельно по мере возможности, предсказуемы.
### Простота: регулируем сложность
Упрошение системы не всегда означает сокращение функциональности. Оно может означать исключение побочной сложности - сложности, возникающей вследсвие конкретной реализации, а не являющейся частью задачи. Лучший инструмент исключения побочной сложности - абстракция.
### Возможность развития: облегчаем внесение изменений
Возможность развития (evolvability) - степень удобства модификации системы и адаптации ее к меняющимся требованиям. Тесто связана с её  простотой и абстракциями: простые и понятные системы легче менять.
## Резюме 
Функциональные требования - что должно делать приложение. Нефункциональные - характеристики того как оно должно это делать, в том числе: маштабируемость, удобство эксплуатации.

Надежность - обеспечение правильной работы системы в случае сбоев. Масштабируемость - наличие стратегий поддержания хорошей производительности в случае роста нагрузки. Удобство сопровождения - облегчение работы разработчиков и операторов, работающих с системой.