# Глава 9. Согласованность и консенсус
*консенсус* — согласованность между всеми узлами по какому-то вопросу

## 9.1. Гарантии согласованности 376
## 9.2. Линеаризуемость 378
*Линеаризуемость* (*атомарная согласованность*, *сильная согласованность*, *непосредственная согласованность*, *внешняя согласованность*) - система внешне выглядит так, как если бы в ней была только одна копия данных и все операции с ними атомарные. *Гарантия актуальности*.

### Что делает систему линеаризуемой 379
### Опора на линеаризуемость 384
Один из способов выбрать ведущий узел — применить блокировку: каждый запускаемый узел пытается получить блокировку, и тот, которому это удастся, становится ведущим. Независимо от того, как реализована блокировка, она должна 
быть линеаризуемой: необходимо соглашение между узлами о том, какому узлу принадлежит блокировка, иначе это бесполезно. Для реализации распределенной блокировки и выбора ведущего узла часто используются такие координационные сервисы, как Apache ZooKeeper.

### Реализация линеаризуемых систем 387
Если операции чтения обслуживаются ведущим узлом или синхронно обновляемыми ведомыми, то они могут быть линеаризуемыми.

### Цена линеаризуемости 390
## 9.3. Гарантии упорядоченности394
### Порядок и причинность 395
### Упорядоченность по порядковым номерам 399
### Рассылка общей последовательности 404
## 9.4. Распределенные транзакции и консенсус409
### Атомарная и двухфазная фиксация (2PC) 411
### Распределенные транзакции на практике 417
### Отказоустойчивый консенсус 422
### Сервисы членства и координации 428