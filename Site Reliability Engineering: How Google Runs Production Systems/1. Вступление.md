# Вступление

## Подход системного администратора к управлению сервисами
Классическое разделение команд разработки (dev) и эксплуатации (ops) приводит к дорогим издержкам. Из-за конфликта в их интересах: первым нужно быстрее добавлять новый функционал, другим - чтобы не ломалась уже работающая система.

## Подход Google к управлению сервисами: техника обеспечения надежности сайтов
SR-иженер на половину разработчик, на половину эксплуататор. Команда SRE должна тратить на операционную работу (дежурства, тикеты) не больше 50% времени и стремиться к её минимизации путём автоматизации всех видов работ.

> - **В**: А мне оно надо? \
**О**: Зависит от целей. Если у меня маленькая галера - не надо. Разработал, прошел приемку независимым тестером, получил деньги и забыл про заказчика. Риски сопровождения не получится включить в финмодель "ИП Макрушин". Но при росте захочется более продолжительных и прибыльных отношений - тогда и пригодятся практики DevOps и SRE, чтобы контролировать конфликты при сопровождении своих поделок.

> - **В**: SRE это всегда отдельная команда? \
**О**: Нет. SRE - реализация DevOps, а DevOps - идеалогия. Принципы SRE можно выполнять в составе отдельной команды или роли, можно и не осозновая их.

## Принципы SRE
В общем случае команда SR-инженеров отвечает за доступность, время отклика, производительность, эффективность, управление изменениями, мониторинг, реагирование в аварийных и критических ситуациях и планирование производительности для своих сервисов.
### Уделяем особое внимание инженерным задачам
Избыток (>50%) операционной работы перенаправляется командам разработки. Ошибки переадресуются мрам, разработчики привлекаются к дежурствам и т.д.. Если операционной работы меньше 50% - переадресация прекращается. Это даёт обратную связь разработчикам - делать системы, не требующие ручного вмешательства.
За смену SR обрабатывает одно-два события. Если больше - не сможет нормально их проработать. Если меньше - в дежурстве нет смысла. Посмотртемы необходимо писать на все значимые инциденты. Особенно важно, если не было уведомлений - это говорит о проблеме в мониторинге. Посмортем нужен дял определения причин и плана во исправлению.

> Создаётся ощущение, что команда SRE должна заниматься поддержкой сервисов команд до тех пор, пока это укладывается в 50% их работы. То есть если буду писать редко ломающиеся сервисы, то и дежурить буду не сам. Не встречал такой практики вживую

### Добиваемся максимальной сокорости внедрения изменений без потери качества обслуживания
Достижение 100%-ой надежности необосновано в большинстве ситуаций. Определив допусимый уровень доступности, можно найти бюджет ошибок. Зная бюджет, команды dev и ops не конфликтуют, а стремятся оптимально его использовать.
### Мониторинг
Интерпретация должна выполняться системой мониторинга. Люди оповещаются только если от них требуются действия.
Существует три категории данных от системы мониторинга:
1. Срочные оповещения (alerts, алёрты) - указывают, что нужно немедленно реагировать на что-то, что либо уже произошло, либо вот-вот произойдёт.
2. Запросы на действия (tickets, тикеты) - указывают, что человеку нужно вмешаться, но не обязательно немедленно. Система не может обработать ситуацию автоматически, но предпринимать какие-то действия допустимо не сразу, а в течении нескольких дней без каких-либо негативных последствий.
3. Журналирование (logging) - нет необходимости кому-либо просматривать эту информацию, она записывается для диагностических целей или для последующего анализа. По умолчанию журнал читать не требуется, пока что-либо иное не заставит сделать это.
### Реагирование на критические ситуации
Надежность - функция от среднего времени безотказной работы (mean time to failure, MTTF) и среднего времени восстановления (mean time to repair, MTTR). При оценки эффективности реагирования на аварии важнее MTTR.
Ручные операции увеличивают задержки. Автоматизированная система будет иметь лучший показатель доступности. Если ручное вмешательство необходимо, инструкции втрое сокращают MTTR.
### Управление изменениями
70% сбоев спровоцированы изменениями в уже работающих системах. Автоматизация обеспечивает поэтапное развертывание обновлений, быстро и точно выявляет проблемы, безопасно откатит изменения при возникновении проблем.
### Прогнозирование нагрузки и планирование производительности
При планировании обязательны точное прогнозирование естественного роста, скачкообразного роста и регулярное нагрузочное тестирование для усновления соотвествия "чистой" производительностью компонент и результирующей пропускной способностью.
### Материально-техническое обеспечение
...
### Эффективность и производительность
Стратегия материально-технического обеспечения сервиса и оптимизация "коэфициента использования" влияют на общую стоимость сервиса.

